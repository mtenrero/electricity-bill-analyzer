(window["webpackJsonpreact-ui"]=window["webpackJsonpreact-ui"]||[]).push([[0],{146:function(e,t,a){},169:function(e,t,a){},281:function(e,t,a){e.exports=a(567)},286:function(e,t,a){},287:function(e,t,a){},289:function(e,t,a){},567:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),l=a(12),s=a.n(l),o=(a(286),a(287),a(288),a(573)),i=(a(289),o.a.Header);var c=function(e){return n.a.createElement(i,null,n.a.createElement("div",{className:"logo"},"electricity bill analyzer"),n.a.createElement("div",{className:"logo_extra"},"by mtenrero.com"))},u=o.a.Footer;var m=function(){return n.a.createElement(u,{style:{textAlign:"center"}},"Electricity-Bill-Analyzer \xa92019 Created by Marcos Tenrero")},p=a(577);var d=function(){return n.a.createElement("div",null,n.a.createElement(p.a,{message:"\xbfC\xf3mo funciona el analizador?",description:"Necesitas disponer del fichero CSV que te proporciona tu compa\xf1\xeda el\xe9ctrica, \r despu\xe9s, debes subirlo desde el formulario que aparece en la secci\xf3n inferior y pulsar enviar.  \r El programa emitir\xe1 el informe de gasto que has realizado",type:"info",showIcon:!0}),n.a.createElement("br",null),n.a.createElement(p.a,{message:"Los datos se env\xedan a nuestros servidores, pero son desechados tras su an\xe1lisis. Cumplimos la RGPD / LOPD",type:"warning",showIcon:!0}))},h=a(29),f=a(30),E=a(32),v=a(31),b=a(33),y=a(572),g=a(574),O=a(575),j=(a(169),a(229)),k=a.n(j),w=a(569),S=a(568),N=a(571),R=a(14),C=w.a.Dragger,D=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).handleUploadDone=function(e){return a.setState({uploaded:!0})},a.state={uploaded:!1},a.draggerProps={name:"file",accept:".csv",multiple:!1},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"normFile",value:function(e){return console.log("Upload event",e),Array.isArray(e)?(this.setState({fileUpload:e.file}),e):(e.fileList.length>1&&(this.setState({fileUpload:e.file}),e.fileList.shift()),e&&e.fileList)}},{key:"dummyRequest",value:function(e){var t=e.file,a=e.onSuccess;this.state.file=t,t.name.match(/\.*.csv/i)?(g.a.success("Fichero preparado"),a("ok")):g.a.error("Debe ser un fichero con formato CSV")}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.next();var a=new FormData;a.append("file",this.state.file),k.a.post("https://europe-west1-light-bill-hourly-usage.cloudfunctions.net/FullMeanAnalysis-1",a,{}).then(function(e){t.props.saveReport(e.data),t.props.next()}).catch(function(e){console.log(e),t.props.servererror()})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return n.a.createElement("div",{className:"fileDragger"},n.a.createElement(S.a,{spinning:1===this.props.step},n.a.createElement(N.a,{onSubmit:this.handleSubmit.bind(this)},n.a.createElement(N.a.Item,null,e("file",{initialValie:this.props.dataset&&this.props.dataset.filename?this.props.dataset.filename:[],valuePropName:"fileList",getValueFromEvent:this.normFile})(n.a.createElement(C,Object.assign({},this.draggerProps,{onChange:this.handleUploadDone,customRequest:this.dummyRequest.bind(this)}),n.a.createElement("p",{className:"ant-upload-drag-icon"},n.a.createElement(R.a,{type:"inbox"})),n.a.createElement("p",{className:"ant-upload-text"},"Selecciona o arrastra un fichero al \xe1rea delimitada"),n.a.createElement("p",{className:"ant-upload-hint"},"S\xf3lo se admiten ficheros CSV")))),n.a.createElement(N.a.Item,{className:"uploadConsumption"},n.a.createElement(O.a,{type:"primary",shape:"round",icon:"cloud-upload",size:"large",htmlType:"submit",disabled:!this.state.uploaded},"Analizar consumo")))))}}]),t}(n.a.Component),x=N.a.create()(D),z=a(18),A=(a(146),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).state={report:e.report},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"weekDaysReport"},n.a.createElement(z.b,{data:this.state.report.weekDaysReport.analysis,width:500,height:300},n.a.createElement(z.e,{dataKey:"weekString"}),n.a.createElement(z.f,null),n.a.createElement(z.c,null),n.a.createElement(z.d,null),n.a.createElement(z.a,{dataKey:"mean",fill:"#1890ff"})))}}]),t}(n.a.Component)),F=a(570),L=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).state={report:e.report},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"weekDaysReport"},n.a.createElement(z.b,{data:this.state.report.hourlyReport.analysis,width:500,height:300},n.a.createElement(z.e,{dataKey:"hour"}),n.a.createElement(z.f,null),n.a.createElement(z.c,null),n.a.createElement(z.d,null),n.a.createElement(z.a,{dataKey:"mean",fill:"#1890ff"})))}}]),t}(n.a.Component),q=a(576),I=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).state={report:e.report},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"weekDaysReport"},this.state.report.weekdayHoursReport.map(function(e,t){return n.a.createElement("div",null,n.a.createElement(q.a,{color:"#87d068"},e.WeekString),n.a.createElement(z.b,{data:e.report.analysis,width:500,height:300},n.a.createElement(z.e,{dataKey:"weekString"}),n.a.createElement(z.f,null),n.a.createElement(z.c,null),n.a.createElement(z.d,null),n.a.createElement(z.a,{dataKey:"mean",fill:"#1890ff"})))}))}}]),t}(n.a.Component),K=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).state={report:e.report},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"report"},n.a.createElement(F.a,{title:"Media de consumo por d\xedas de la semana",className:"cardReport"},n.a.createElement(A,this.props)),n.a.createElement(F.a,{title:"Media de consumo horario",className:"cardReport"},n.a.createElement(L,this.props)),n.a.createElement(F.a,{title:"Media de consumo horario fraccionado por d\xedas de la semana",className:"cardReport"},n.a.createElement(I,this.props)))}}]),t}(n.a.Component),M=y.a.Step,P=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(E.a)(this,Object(v.a)(t).call(this,e))).state={step:e.step,servererror:"process",report:null},a}return Object(b.a)(t,e),Object(f.a)(t,[{key:"moveStep",value:function(){this.setState({step:this.state.step+1})}},{key:"handleError",value:function(){g.a.error("Error procesando el fichero, posiblemente no tenga un contenido v\xe1lido"),this.setState({servererror:"error"})}},{key:"handleRestart",value:function(){this.setState({step:0}),this.setState({servererror:"process"})}},{key:"handleReportCallback",value:function(e){this.setState({report:e})}},{key:"render",value:function(){return n.a.createElement("div",{className:"Stepper"},n.a.createElement(y.a,{current:this.state.step,status:this.state.servererror},n.a.createElement(M,{title:"Selecciona tu consumo",description:"Localiza tu fichero de consumo"}),n.a.createElement(M,{title:"An\xe1lisis",description:"Espera mientras analizamos tus patrones de gasto energ\xe9tico"}),n.a.createElement(M,{title:"Informe",description:"Examina tus patrones de gasto energ\xe9tico"})),this.state.step<2?n.a.createElement(x,{next:this.moveStep.bind(this),servererror:this.handleError.bind(this),step:this.state.step,saveReport:this.handleReportCallback.bind(this)}):null,this.state.step>=2?n.a.createElement(K,{report:this.state.report}):null,n.a.createElement("div",{className:"rollbackSteps"},n.a.createElement(O.a,{type:"danger",icon:"redo",onClick:this.handleRestart.bind(this)},"Empezar de nuevo")))}}]),t}(n.a.Component),U=o.a.Content;var V=function(e){return n.a.createElement("div",{className:"App"},n.a.createElement(o.a,{className:"layout"},n.a.createElement(c,null),n.a.createElement(U,{style:{padding:"0 50px"}},n.a.createElement("div",{style:{background:"#fff",padding:24,minHeight:280}},n.a.createElement(d,null),n.a.createElement("br",null),n.a.createElement(P,{step:0}))),n.a.createElement(m,null)))};var B=function(){return n.a.createElement(V,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(n.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[281,1,2]]]);
//# sourceMappingURL=main.280de773.chunk.js.map